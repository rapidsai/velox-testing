name: Runner Setup
description: Setup self-hosted runner environment


runs:
  using: composite
  steps:
    - name: Dump environment
      shell: bash -eo pipefail {0}
      run: |
        echo "env: ${{ toJSON(env) }}"
        echo "runner: '${{ toJSON(runner) }}'"

    - name: Setup self-hosted runner environment
      shell: bash -eo pipefail {0}
      run: |
        echo "HOME=${{ runner.workspace }}" >> $GITHUB_ENV;
        echo "TMPDIR=${{ runner.temp }}" >> $GITHUB_ENV;

    - name: Setup docker buildx on self-hosted runners
      uses: docker/setup-buildx-action@v3
      with:
        buildkitd-config: /etc/buildkit/buildkitd.toml
